apiVersion: score.dev/v1b1
metadata:
  name: cartservice
containers:
  cartservice:
    image: gcr.io/google-samples/microservices-demo/cartservice:v0.6.0
    variables:
      REDIS_ADDR: "${resources.redis.name}:6379"
    livenessProbe:
      exec:
        command:
          - /bin/grpc_health_probe
          - '-addr=:7070'
    readinessProbe:
      exec:
        command:
          - /bin/grpc_health_probe
          - '-addr=:7070'
resources:
  redis:
    type: service
    properties:
      name:
service:
  ports:
    grpc:
      port: 7070
      targetPort: 7070